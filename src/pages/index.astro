---
// src/pages/index.astro
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';
import PostCard from '../components/PostCard.astro';
import Footer from '../components/Footer.astro';
import ThemeToggle from '../components/ThemeToggle.astro';

// This would typically come from a CMS or markdown files
// For demo purposes, we'll use mock data
const posts = await getCollection('blog');
posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());

// Optional: Limit to latest posts (e.g., 3 posts)
const latestPosts = posts.slice(0, 3);
---

<BaseLayout>
  <Navigation slot="navigation" />
  <ThemeToggle slot="theme-toggle" />

  <div>
    <h1 class="heading text-3xl mb-10">Latest Posts</h1>
    
    <section>
      {latestPosts.map(post => (
        <PostCard post={post} />
      ))}
    </section>
    
    <div class="mt-8">
      <a 
        href="/blog" 
        class="text-gl-accent dark:text-gd-accent hover:underline font-medium"
      >
        View all posts â†’
      </a>
    </div>
  </div>
  
  <Footer slot="footer" />
</BaseLayout>
