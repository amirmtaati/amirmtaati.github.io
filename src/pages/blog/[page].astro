---
// src/pages/blog/[page].astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navigation from '../../components/Navigation.astro';
import PostCard from '../../components/PostCard.astro';
import Footer from '../../components/Footer.astro';
import ThemeToggle from '../../components/ThemeToggle.astro';
import Pagination from '../../components/Pagination.astro';

export async function getStaticPaths({ paginate }) {
  // In a real app, this would be retrieved from your content collection
  // For demo purposes, we'll use mock data
  const allPosts = Array(10).fill(null).map((_, i) => ({
    title: `Blog Post ${i + 1}`,
    slug: `blog-post-${i + 1}`,
    excerpt: "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
    date: new Date(2025, 3, 30 - i),
    tags: ["blog", i % 2 === 0 ? "technology" : "thoughts"]
  }));

  return paginate(allPosts, { pageSize: 5 });
}

const { page } = Astro.props;
---

<BaseLayout>
  <Navigation slot="navigation" />
  <ThemeToggle slot="theme-toggle" />

  <div>
    <h1 class="heading text-3xl mb-10">Blog</h1>
    
    <section>
      {page.data.map(post => (
        <PostCard post={post} />
      ))}
    </section>
    
    <Pagination 
      currentPage={page.currentPage} 
      totalPages={page.lastPage} 
      basePath="/blog" 
    />
  </div>
  
  <Footer slot="footer" />
</BaseLayout>